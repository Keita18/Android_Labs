
# Лабораторная работа №3. Lifecycle компоненты. Навигация в приложении.  
## Цели  
* Ознакомиться с методом обработки жизненного цикла activity/fragment при помощи Lifecycle-Aware компонентов    
* Изучить основные возможности навигации внутри приложения: созданиие новых activity, navigation graph  
  
## Задачи  
### Задача 1. Обработка жизненного цикла с помощью Lifecycle-Aware компонентов  
#### Задание  
 Ознакомьтесь с Lifecycle-AwareComponents по документации и выполните codelabs.
 
 **androidx.lifecycle** - предоставляет классы и интерфейсы, позволяющие создавать компоненты с учетом жизненного цикла, которые могут автоматически корректировать свое поведение в зависимости от текущего состояния жизненного цикла действия или фрагмента.
 
 **LifecycleOwner** - это интерфейс, реализованный классами AppCompatActivity и Fragment. Мы можем подписать другие компоненты на объекты-владельцы, которые реализуют данный интерфейс, чтобы наблюдать за изменениями в жизненном цикле владельца.
 
 **LiveData** - позволяет наблюдать за изменениями данных в нескольких компонентах приложения, не создавая явных жёстких путей зависимости между ними. Он учитывает сложные жизненные циклы компонентов приложения, включая действия, фрагменты, службы или любой LifecycleOwner, определённый в нашем приложении. LiveData управляет подписками наблюдателей, приостанавливая подписки на остановленные объекты LifecycleOwner и отменяя подписки на завершённые объекты LifecycleOwner.
 
 ### Задача 2. Навигация (startActivityForResult)
#### Задание
Реализуйте навигацию между экранами одного приложения согласно изображению ниже с помощью `Activity`, `Intent` и метода `startActivityForResult`.
![эскиз](activities.svg)
Во всех вариантах Activity 'About' должна быть доступна из любой другой Activity одним из способов согласно варианту.

Во всех вариантах Activity 'About' должна быть доступна из любой другой Activity c способом: [Options Menu](https://developer.android.com/guide/topics/ui/menus#options-menu)
### Решение
Чтобы начать новое Activity, Android предлагает метод `startActivity ()`. 
```
public void startActivity(Intent intent)
```
Этот метод позволяет взаимодействовать с операционной системой Android, запрашивая ее для запуска определенного Activity. Чтобы указать, какую активность запустить, используется конкретный объект: [Intent](https://developer.android.com/reference/android/content/Intent). При вызове метода **startActivity()** внутренний объект Android **ActivityManager** проверяет содержимое объекта **Intent** и запускает соответствующее действие.
 
 метод `finish ()` позволяет просто сказать системе : я закончил с текущей деятельностью, остановите ее и верните меня к предыдущей деятельности.
 
 мы хотим запустить thirdActivity и ожидаем от него результата, который позволит нам узнать, нужно ли закрывать secondActivity, чтобы вернуться к firstActivity. Для этого используется метод `startActivityForResult ()`.
 `startActivityForResult()` позволяет при этом вытащить результат Activity.
 
via menuOptions ActivityAbout была создана которая доступна из всех Activity через Options Menu.

### Задача 3. Навигация (флаги Intent/атрибуты Activity)
#### Задание
Решите предыдущую задачу с помощью Activity, Intent и флагов Intent либо атрибутов Activity.

#### Указания
Не используйте `startActivityForResult` в этом задании.
### Решение

`FLAG_ACTIVITY_CLEAR_TOP` in Android

Это означает следующее: допустим, у нас есть 4 вида Activities, А, В, С и D, и поток
A -> B -> C -> D

и теперь, когда вы находитесь на D, вы хотите запустить действие B (из стека, а не из нового экземпляра), тогда вы можете использовать этот флаг намерения. Кроме того, он удаляет все остальные действия поверх B (здесь C и D).

### Задача 4. Навигация (флаги Intent/атрибуты Activity)
Дополните граф навигации новым(-и) переходом(-ами) с целью демонстрации какого-нибудь (на свое усмотрение) атрибута Activity или флага Intent, который еще не использовался для решения задачи. Поясните пример и работу флага/атрибута.
### Решение
`FLAG_ACTIVITY_NO_HISTORY`. Его работу можно продемонстрировать путём перехода в любую activity и нажатием «назад». При нажатии назад, флаг будет возвращать каждый раз к 1 activity, то есть не сохранять историю передвижения по activity.

Существует также `FLAG_ACTIVITY_REORDER_TO_FRONT`:

"Например, рассмотрим задачу, состоящую из четырех действий: A, B, C, D. Если D вызывает startActivity() с намерением, которое разрешает компонент действия B, то B будет выведен на передний план стека истории с таким результирующим порядком: A, C, D, B. Этот флаг будет проигнорирован, если также указан FLAG_ACTIVITY_CLEAR_TOP."

### Задача 5. Навигация (Fragments, Navigation Graph) 
Решите предыдущую задачу (с расширенным графом) с использованием navigation graph. Все Activity должны быть заменены на фрагменты, кроме Activity 'About', которая должна остаться самостоятельной Activity.

Фрагмент можно представить как часть (или... осколок ! : D) многоразовый наш графический интерфейс. Таким образом, на практике действие будет разделено на один или несколько фрагментов, чтобы создать настраиваемый и, прежде всего, гибкий пользовательский интерфейс

* Fragments-это не Activities. Однако они не могут работать сами по себе и должны быть всегда размещены внутри деятельности.

* Вы будете работать с фрагментами так же, как с Activities : у них есть жизненный цикл (onCreate, onResume и т. д.)...) и макет (fragment_main.xml, например).

* Fragments тесно связаны с Activities, их жизненный цикл тоже. Если действие будет уничтожено (например, вращение экрана), фрагменты также будут уничтожены. Однако вы можете добавлять и удалять фрагменты в горячем действии (без влияния на жизненный цикл действия).

мы создали MainActivity, в которой находится NavController, который помогает переходить между activity.Nav_host_fragment является контейнером для фрагментов и они переключаются внутри него.
Чтобы переключаться между фрагментами нужно заполнить nav_graph, а также указать переходы между фрагментами. 


